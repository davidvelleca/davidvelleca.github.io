<!DOCTYPE html>
<html lang="en">

  <head>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-128651188-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		
		gtag('config', 'UA-128651188-1');
	</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon"	  
      href="/favicon_vpW_icon.ico">
    <title>David Velleca</title>

    <!-- Bootstrap core CSS -->
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="/css/clean-blog.min.css" rel="stylesheet">

  </head>

  <body>
    <style>
        html, body { height: 100% }
    </style>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
	      <a class="navbar-brand" href="/index.html"><img src="https://raw.githubusercontent.com/davidvelleca/davidvelleca.github.io/master/Logo.png" width="250"></img></a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/archive.html">Archive</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>


    <!-- Page Header -->
    <header class="masthead" style="background-image: url('https://github.com/davidvelleca/davidvelleca.github.io/blob/master/img/BG%20-%20Index.jpg?raw=true')">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="post-heading">
              <h1>Set Actions: Drilling with Set Actions<h1>
              <h2 class="subheading">Get to the Data that's Most Important</h2>
              <span class="meta">Posted by
                <a href="https://twitter.com/DavidVelleca">David Velleca</a>
                on April 27, 2019</span>
            </div>
          </div>
        </div>
      </div>
    </header>

<!-- Post Content -->
    <article>
      <div class="container">
        <div class="row">
			<div class="col-lg-8 col-md-10 mx-auto">
				<h2 class="section-heading">[Set Actions] + [Clever Calculated Fields] = [Awesome Drilling]</h2>
          <p>A couple weeks ago, I tweeted a Tableau Confession:</p>
          <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/hashtag/TableauConfession?src=hash&amp;ref_src=twsrc%5Etfw">#TableauConfession</a>: So, at <a href="https://twitter.com/hashtag/TC18?src=hash&amp;ref_src=twsrc%5Etfw">#TC18</a> when everyone was super excited about <a href="https://twitter.com/hashtag/SetActions?src=hash&amp;ref_src=twsrc%5Etfw">#SetActions</a>, I didn&#39;t get it.  Fast forward 6 months and WOW, I GET IT!  I LOVE SET ACTIONS! Check out my <a href="https://twitter.com/tableau?ref_src=twsrc%5Etfw">@tableau</a> <a href="https://twitter.com/hashtag/viz?src=hash&amp;ref_src=twsrc%5Etfw">#viz</a> for this week&#39;s <a href="https://twitter.com/hashtag/ThrowbackDataThursday?src=hash&amp;ref_src=twsrc%5Etfw">#ThrowbackDataThursday</a> challenge <a href="https://t.co/cUyc052EWd">https://t.co/cUyc052EWd</a> <a href="https://t.co/jvKTNncA0v">pic.twitter.com/jvKTNncA0v</a></p>&mdash; David Velleca (@davidvelleca) <a href="https://twitter.com/davidvelleca/status/1113997215037624320?ref_src=twsrc%5Etfw">April 5, 2019</a></blockquote>
          <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
          <p>Over the past few months, I've been exploring what is really possible with Set Actions.  I've used them to filter, drive highlighting across multiple sheets, highlight in Viz in Tooltips (which I think is AWESOME), and even at work to provide asymmetric drill downs in crosstabs (when I have to use them...).  As with most skills or concepts, through use, my proficiency has increased and I've moved on to trying new things.</p>
          <p>For #ThrowbackDataThursday this past week, the dataset dealt with the history of the NFL Draft.  In my viz, I used a variation on asymmetric drilling to provide the user the opportunity for a more in depth look at the draft.  The default view includes a bar chart showing the number of draft picks by year for each position.  When the user clicks on a year, the viz drills in to show the data for each round in the selected year - excluding all other years.  The viz is at the bottom of this post, but you can play with the concept here:</p>
          <div class='tableauPlaceholder' id='viz1556400960806' style='position: relative'><noscript><a href='https:&#47;&#47;throwback-thursday.com&#47;posts&#47;archive&#47;2019.04.25%20Draft%20Viz'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Th&#47;TheNFLDraft-1970to2018&#47;NFLDraftDrillingExample&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='TheNFLDraft-1970to2018&#47;NFLDraftDrillingExample' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Th&#47;TheNFLDraft-1970to2018&#47;NFLDraftDrillingExample&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='filter' value='publish=yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1556400960806');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='700px';vizElement.style.height='327px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='700px';vizElement.style.height='327px';} else { vizElement.style.width='100%';vizElement.style.height='727px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
          <p>Ok, so let's walk through the how I did this.  Feel free to head over to <a href="https://throwback-thursday.com" target="_blank">the ThrowbackDataThursday website</a> to download the data if you want to play along at home...  Ok, so the first step to using Set Actions is creating your set.  I created my set on [Year] and used the incredibly imaginative name [Year Set].  To start with, I had no members in the set.</p>
          <p>Without any additional work here, the set action would only add or remove members of the set.  To take advantage of the set action, we need to leverage some clever calculated fields.  As a reminder, I wanted to drill from [Year] to [Round].  The first calculated field is really simple - we'll use an IF statement to return the [Round] if the [Year] is a member of [Year Set]:</p>
          <img src="https://raw.githubusercontent.com/davidvelleca/davidvelleca.github.io/master/img/SetDrillCalc1.png" class="img-fluid" alt="Responsive image" width="600"></img>
          <p>I put this calculated field - [Year - Round Drill] on the Columns shelf.  Now, if we wanted to use typical asymmetric drilling, we'd be good with just this calculation, but that would not result in the outcome I was looking for - I wanted to isolate the viz to only the selected year.  I knew that this would require a filter on the view that responded to the changes of the set members.  At a high level, the logic is really straight forward - if there are no members in the set, then show all years.  If there are members in the set, then only show me the year that is in the set.</p>
          <p>Understanding that you can use a set in your calculated field to evaluate to True/False, I was able to leverage that along with level of detail calculations to allow me to look across the entire view.  Let's look at the calc and then I'll explain:</p>
          <img src="https://raw.githubusercontent.com/davidvelleca/davidvelleca.github.io/master/img/SetDrillCalc2.png" class="img-fluid" alt="Responsive image" width="600"></img>
          <p>The first part of the calc looks across the entire set and if there are NO members in the set, it returns a 1.  The second part of the IF statement looks at the year level and checks if a particular year is in the set.  If the year is in the set, it also brings back a 1.  If the year is NOT in the set, it also fails that first condition (that the set is empty), and gives a 0.  I then put this calc - [Year Set Filter] - on the Filter shelf, set to 1.</p>
          <p>To test that this all works, the only piece left is to add a measure to rows and add the set action.  Knowing that I have one record per Draft Pick in my dataset, I simply used SUM([Number of Records]).  Now let's setup our set action.</p>
          <img src="https://raw.githubusercontent.com/davidvelleca/davidvelleca.github.io/master/img/SetDrillAction.png" class="img-fluid" alt="Responsive image" width="600"></img>
          <p>We want to drive the action on a click, so we'll choose 'Run action on: Select.'  We'll choose our Dataset (defaults to the correct DS if there is only one), and choose our [Year Set].  Then we have to choose what to do when the action is cleared - when the user clicks again.  I want to drill back up to all years, so I know that I need to remove all members of the set so my Filter calculation will evaluate to 1.  Click OK and test it out!</p>
          <p>So with most concepts in Tableau, we can take it a few steps further.  For instance, I wanted to drive my BANS to reflect the right values for the set member, so I applied my filter across both sheets.  I also wanted to have responsive tooltips and labels that would indicate the chosen year - a couple more calculated fields, some formatting and I was there.</p>
          <p>Check out my finished product below.  This isn't the flashiest viz from a visual perspective, but really happy with the interactivity.  How could you use this method in your vizzes?  <a href="https://twitter.com/davidvelleca" target="_blank">Let me know on Twitter!</a>  I'd love to hear how you could use this concept.</p>
			</div>
		</div>
      </div>
      <div class='tableauPlaceholder' id='viz1556404219981' style='position: relative'><noscript><a href='https:&#47;&#47;throwback-thursday.com&#47;posts&#47;archive&#47;2019.04.25%20Draft%20Viz'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Th&#47;TheNFLDraft-1970to2018&#47;NFLDraft1970to2018&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='TheNFLDraft-1970to2018&#47;NFLDraft1970to2018' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Th&#47;TheNFLDraft-1970to2018&#47;NFLDraft1970to2018&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1556404219981');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='1300px';vizElement.style.height='1427px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
    </article>
      <hr>

   <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a href="https://twitter.com/davidvelleca">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              <li class="list-inline-item">
                <a href="https://public.tableau.com/profile/david.c.velleca#!/">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-bar-chart fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
			  <li class="list-inline-item">
                <a href="https://www.linkedin.com/in/davidvelleca/">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright &copy; davidvelleca.com 2018</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/clean-blog.min.js"></script>

  </body>

</html>
